<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Villa Park Little League</title>
    <!-- Enable iOS PWA standalone mode and Open-in-App banner -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="VPLL">

<!-- iOS home screen icon -->
<link rel="apple-touch-icon" href="/icons/icon-192.png">

  <!-- CSS -->
<link rel="stylesheet" href="style.css?v=5" />

<!-- JS -->
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>

<script>
  window.OneSignalDeferred = window.OneSignalDeferred || [];
  OneSignalDeferred.push(async function(OneSignal) {
    await OneSignal.init({
      appId: "192e5a60-076a-4ed7-8d07-14dd45389879",
    });
  });
</script>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script src="app-v2.js?v=5" defer></script>

    <!-- PWA -->
    <link rel="manifest" href="manifest.json" />
    <link rel="icon" type="image/png" href="60thlogo.jpg" />
</head>

<body>
<div id="loadingSpinner" class="spinner-overlay" style="display:none;">
  <img src="vpll-spinner.svg" class="vpll-spinner" alt="Loading">
</div>

<!-- Header -->
<header>
    <img src="60thlogo.jpg" alt="Villa Park Logo" />
    Villa Park Little League
</header>
<!-- AUTH SECTION (Shown before user unlocks) -->
<div id="auth-section" style="display:none; padding:20px; text-align:center;">

  <h2 style="margin-bottom:10px;">Unlock App</h2>

  <p>Please enter your email address:</p>

  <input 
    id="auth-email" 
    type="email" 
    placeholder="you@example.com"
    style="padding:10px; width:80%; max-width:300px; margin-top:10px;"
  />

  <button 
    onclick="handleLogin(document.getElementById('auth-email').value)"
    style="margin-top:15px; padding:10px 20px;">
      Send Magic Link
  </button>

</div>

<div id="gameTicker" class="ticker">
    <div class="ticker__wrap">
        <div class="ticker__move" id="tickerContent"></div>
    </div>
</div>

<!-- APP SHELL (Hidden until user unlocks) -->
<div id="app-shell" style="display:none;">

  <!-- Main App Root -->
  <main id="page-root">
      <div id="homeContent"></div>
  </main>

  <!-- Bottom Navigation -->
  <nav id="bottomNav">
      <button class="nav-btn" data-page="home">
          <span class="icon">ğŸ </span>
          <span class="label">Home</span>
      </button>

      <button class="nav-btn" data-page="schedule">
          <span class="icon">ğŸ“…</span>
          <span class="label">Schedule</span>
      </button>

      <button class="nav-btn" data-page="standings">
          <span class="icon">ğŸ†</span>
          <span class="label">Standings</span>
      </button>

      <button class="nav-btn" data-page="more">
          <span class="icon">â‹¯</span>
          <span class="label">More</span>
      </button>
  </nav>

</div>
<script>
  if ("serviceWorker" in navigator) {
    window.addEventListener("load", function() {
      navigator.serviceWorker.register("/vpll-sw-v7.js")
        .then(() => console.log("Service Worker Registered"))
        .catch(err => console.error("SW registration failed:", err));
    });
  }
</script>

</body>
</html>
